<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>oidc-client-ts</title><meta name="description" content="Documentation for oidc-client-ts"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">oidc-client-ts</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>oidc-client-ts </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p><a href="https://github.com/authts/oidc-client-ts">oidc-client-ts</a> is a TypeScript library intended to be used by web applications and run in browsers. It provides protocol support for OIDC and OAuth2, as well as management functions for user sessions and access tokens management.</p>
<p>If you are unfamiliar with OpenID Connect, then you should learn the
<a href="https://openid.net/specs/openid-connect-core-1_0.html">protocol</a> first. This
library is designed as a spec-compliant protocol library.</p>
<p>There are two main classes that you might want to use depend on the level at
with you use to use the library:</p>
<ul>
<li><a href="classes/UserManager.html">UserManager</a> provides a higher level API for
signing a user in, signing out, managing the user&#39;s claims</li>
<li><a href="classes/OidcClient.html">OidcClient</a> provides the raw OIDC/OAuth2 protocol
support</li>
</ul>
<p>The remainder of this document will primarily focus on the
<a href="classes/UserManager.html">UserManager</a>.</p>

<a href="#usermanager" id="usermanager" style="color: inherit; text-decoration: none;">
  <h2>UserManager</h2>
</a>

<a href="#configuration" id="configuration" style="color: inherit; text-decoration: none;">
  <h3>Configuration</h3>
</a>
<p>The <a href="classes/UserManager.html">UserManager</a> constructor requires a settings
object as a parameter:</p>
<ul>
<li><a href="interfaces/UserManagerSettings.html">UserManagerSettings</a> which extends</li>
<li><a href="interfaces/OidcClientSettings.html">OidcClientSettings</a></li>
</ul>

<a href="#required-settings" id="required-settings" style="color: inherit; text-decoration: none;">
  <h4>Required settings</h4>
</a>
<ul>
<li><a href="interfaces/OidcClientSettings.html#authority">authority</a>: The URL of the
OIDC/OAuth2 provider.</li>
<li><a href="interfaces/OidcClientSettings.html#client_id">client_id</a>: Your client
application&#39;s identifier as registered with the OIDC/OAuth2 provider.</li>
<li><a href="interfaces/OidcClientSettings.html#redirect_uri">redirect_uri</a>: The redirect
URI of your client application to receive a response from the OIDC/OAuth2
provider.</li>
</ul>

<a href="#provider-settings-if-cors-not-supported-on-oidcoauth2-provider-metadata-endpoint" id="provider-settings-if-cors-not-supported-on-oidcoauth2-provider-metadata-endpoint" style="color: inherit; text-decoration: none;">
  <h4>Provider settings if CORS not supported on OIDC/OAuth2 provider metadata endpoint</h4>
</a>
<p>The <a href="interfaces/OidcClientSettings.html#authority">authority</a> URL setting is
used to make HTTP requests to discover more information about the OIDC/OAuth2
provider and populate a <code>metadata</code> property on the settings. If the server does
not allow CORS on the metadata endpoint, then these additional settings can be
manually configured. These values can be found on the metadata endpoint of the
provider:</p>
<ul>
<li>metadata property which contains:<ul>
<li>issuer</li>
<li>authorization_endpoint</li>
<li>userinfo_endpoint</li>
<li>end_session_endpoint</li>
</ul>
</li>
<li><a href="interfaces/UserManagerSettings.html#metadataSeed">metadataSeed</a> can be used
to seed or add additional values to the results of the discovery request.</li>
</ul>

<a href="#events" id="events" style="color: inherit; text-decoration: none;">
  <h3>Events</h3>
</a>
<p>The <a href="classes/UserManager.html">UserManager</a> will raise various events about the
user&#39;s session:</p>
<ul>
<li><a href="classes/UserManagerEvents.html">UserManagerEvents</a> which extends</li>
<li><a href="classes/AccessTokenEvents.html">AccessTokenEvents</a></li>
</ul>
<p>To register for the events, there is an <code>events</code> property on the
<a href="classes/UserManager.html">UserManager</a> with <code>addXxx</code> and <code>removeXxx</code> APIs to
add/remove callbacks for the events. An example:</p>
<pre><code class="language-javascript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">mgr</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">UserManager</span><span class="hl-1">();</span><br/><span class="hl-4">mgr</span><span class="hl-1">.</span><span class="hl-4">events</span><span class="hl-1">.</span><span class="hl-3">addAccessTokenExpiring</span><span class="hl-1">(</span><span class="hl-0">function</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-5">&quot;token expiring...&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#user" id="user" style="color: inherit; text-decoration: none;">
  <h2>User</h2>
</a>
<p>The <a href="classes/User.html">User</a> type is returned from the <a href="classes/UserManager.html">UserManager</a>&#39;s <a href="classes/UserManager.html#getUser">getUser</a> API.</p>

<a href="#logging" id="logging" style="color: inherit; text-decoration: none;">
  <h2>Logging</h2>
</a>
<p>The oidc-client-ts library supports logging. You can set a logger by assigning <code>Oidc.Log.logger</code> to anything that supports a <code>info</code>, <code>warn</code>, and <code>error</code> methods that accept a params array. By default, no logger is configured.</p>
<p>The <code>console</code> object in the browser supports these, so a common way to easily
enable logging in the browser is to simply add this code:</p>
<pre><code class="language-javascript"><span class="hl-4">Oidc</span><span class="hl-1">.</span><span class="hl-4">Log</span><span class="hl-1">.</span><span class="hl-3">setLogger</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">);</span>
</code></pre>
<p>Also, logging has levels so you can control the verbosity by calling
<code>Oidc.Log.setLevel()</code> with one of <code>Oidc.Log.NONE</code>, <code>Oidc.Log.ERROR</code>,
<code>Oidc.Log.WARN</code>, or <code>Oidc.Log.INFO</code>. The default is <code>Oidc.Log.INFO</code>.</p>

<a href="#provider-specific-settings" id="provider-specific-settings" style="color: inherit; text-decoration: none;">
  <h2>Provider specific settings</h2>
</a>
<p>Additional provider specific settings may be needed for a flawless operation:</p>
<p><strong>Amazon Cognito</strong></p>
<pre><code class="language-javascript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">mgr</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">UserManager</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-6">// ...</span><br/><span class="hl-1">    </span><span class="hl-6">// no revoke of &quot;access token&quot; (https://github.com/authts/oidc-client-ts/issues/262)</span><br/><span class="hl-1">    </span><span class="hl-4">revokeTokenTypes:</span><span class="hl-1"> [</span><span class="hl-5">&quot;refresh_token&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-6">// no silent renew via &quot;prompt=none&quot; (https://github.com/authts/oidc-client-ts/issues/366)</span><br/><span class="hl-1">    </span><span class="hl-4">automaticSilentRenew:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#custom-state-in-user-object" id="custom-state-in-user-object" style="color: inherit; text-decoration: none;">
  <h2>Custom state in user object</h2>
</a>
<p>In case you would like to add additional data into the <a href="classes/User.html">User</a> object, you can do so during the initial sign-in request.</p>
<pre><code class="language-javascript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">mgr</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">UserManager</span><span class="hl-1">();</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">customState</span><span class="hl-1"> = { </span><span class="hl-4">foo:</span><span class="hl-1"> </span><span class="hl-5">&quot;bar&quot;</span><span class="hl-1"> };</span><br/><span class="hl-4">mgr</span><span class="hl-1">.</span><span class="hl-3">signinRedirect</span><span class="hl-1">({ </span><span class="hl-4">state:</span><span class="hl-1"> </span><span class="hl-4">customState</span><span class="hl-1"> });</span>
</code></pre>
<p>After successful sign-in the custom state is part of the <a href="classes/User.html#state">User</a> object as <code>state</code>. In case of failure it is inside <a href="classes/ErrorResponse.html#state">ErrorResponse</a>.</p>
<p>This custom state should not be confused with the URL state parameter. The latter is internally used to match against the authentication state object to finish the authentication process.</p>

<a href="#samples-using-oidc-client" id="samples-using-oidc-client" style="color: inherit; text-decoration: none;">
  <h2>Samples using oidc-client</h2>
</a>
<ul>
<li><a href="https://github.com/authts/react-oidc-context">React Helper Library</a></li>
</ul>

<a href="#training" id="training" style="color: inherit; text-decoration: none;">
  <h2>Training</h2>
</a>
<ul>
<li><a href="https://noyes.me/ng-openid-oauth2">Securing Angular Apps with OpenID and OAuth2</a></li>
</ul>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/Log.html">Log</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-enum"><a href="enums/Log.html" class="tsd-kind-icon">Log</a></li><li class="tsd-kind-class"><a href="classes/AccessTokenEvents.html" class="tsd-kind-icon">Access<wbr/>Token<wbr/>Events</a></li><li class="tsd-kind-class"><a href="classes/ErrorResponse.html" class="tsd-kind-icon">Error<wbr/>Response</a></li><li class="tsd-kind-class"><a href="classes/ErrorTimeout.html" class="tsd-kind-icon">Error<wbr/>Timeout</a></li><li class="tsd-kind-class"><a href="classes/InMemoryWebStorage.html" class="tsd-kind-icon">In<wbr/>Memory<wbr/>Web<wbr/>Storage</a></li><li class="tsd-kind-class"><a href="classes/Logger.html" class="tsd-kind-icon">Logger</a></li><li class="tsd-kind-class"><a href="classes/MetadataService.html" class="tsd-kind-icon">Metadata<wbr/>Service</a></li><li class="tsd-kind-class"><a href="classes/OidcClient.html" class="tsd-kind-icon">Oidc<wbr/>Client</a></li><li class="tsd-kind-class"><a href="classes/OidcClientSettingsStore.html" class="tsd-kind-icon">Oidc<wbr/>Client<wbr/>Settings<wbr/>Store</a></li><li class="tsd-kind-class"><a href="classes/SessionMonitor.html" class="tsd-kind-icon">Session<wbr/>Monitor</a></li><li class="tsd-kind-class"><a href="classes/SigninRequest.html" class="tsd-kind-icon">Signin<wbr/>Request</a></li><li class="tsd-kind-class"><a href="classes/SigninResponse.html" class="tsd-kind-icon">Signin<wbr/>Response</a></li><li class="tsd-kind-class"><a href="classes/SigninState.html" class="tsd-kind-icon">Signin<wbr/>State</a></li><li class="tsd-kind-class"><a href="classes/SignoutRequest.html" class="tsd-kind-icon">Signout<wbr/>Request</a></li><li class="tsd-kind-class"><a href="classes/SignoutResponse.html" class="tsd-kind-icon">Signout<wbr/>Response</a></li><li class="tsd-kind-class"><a href="classes/State.html" class="tsd-kind-icon">State</a></li><li class="tsd-kind-class"><a href="classes/User.html" class="tsd-kind-icon">User</a></li><li class="tsd-kind-class"><a href="classes/UserManager.html" class="tsd-kind-icon">User<wbr/>Manager</a></li><li class="tsd-kind-class"><a href="classes/UserManagerEvents.html" class="tsd-kind-icon">User<wbr/>Manager<wbr/>Events</a></li><li class="tsd-kind-class"><a href="classes/UserManagerSettingsStore.html" class="tsd-kind-icon">User<wbr/>Manager<wbr/>Settings<wbr/>Store</a></li><li class="tsd-kind-class"><a href="classes/WebStorageStateStore.html" class="tsd-kind-icon">Web<wbr/>Storage<wbr/>State<wbr/>Store</a></li><li class="tsd-kind-interface"><a href="interfaces/CreateSigninRequestArgs.html" class="tsd-kind-icon">Create<wbr/>Signin<wbr/>Request<wbr/>Args</a></li><li class="tsd-kind-interface"><a href="interfaces/IFrameWindowParams.html" class="tsd-kind-icon">IFrame<wbr/>Window<wbr/>Params</a></li><li class="tsd-kind-interface"><a href="interfaces/ILogger.html" class="tsd-kind-icon">ILogger</a></li><li class="tsd-kind-interface"><a href="interfaces/IdTokenClaims.html" class="tsd-kind-icon">Id<wbr/>Token<wbr/>Claims</a></li><li class="tsd-kind-interface"><a href="interfaces/JwtClaims.html" class="tsd-kind-icon">Jwt<wbr/>Claims</a></li><li class="tsd-kind-interface"><a href="interfaces/OidcAddressClaim.html" class="tsd-kind-icon">Oidc<wbr/>Address<wbr/>Claim</a></li><li class="tsd-kind-interface"><a href="interfaces/OidcClientSettings.html" class="tsd-kind-icon">Oidc<wbr/>Client<wbr/>Settings</a></li><li class="tsd-kind-interface"><a href="interfaces/OidcMetadata.html" class="tsd-kind-icon">Oidc<wbr/>Metadata</a></li><li class="tsd-kind-interface"><a href="interfaces/OidcStandardClaims.html" class="tsd-kind-icon">Oidc<wbr/>Standard<wbr/>Claims</a></li><li class="tsd-kind-interface"><a href="interfaces/PopupWindowFeatures.html" class="tsd-kind-icon">Popup<wbr/>Window<wbr/>Features</a></li><li class="tsd-kind-interface"><a href="interfaces/PopupWindowParams.html" class="tsd-kind-icon">Popup<wbr/>Window<wbr/>Params</a></li><li class="tsd-kind-interface"><a href="interfaces/RedirectParams.html" class="tsd-kind-icon">Redirect<wbr/>Params</a></li><li class="tsd-kind-interface"><a href="interfaces/SessionStatus.html" class="tsd-kind-icon">Session<wbr/>Status</a></li><li class="tsd-kind-interface"><a href="interfaces/SigninRequestArgs.html" class="tsd-kind-icon">Signin<wbr/>Request<wbr/>Args</a></li><li class="tsd-kind-interface"><a href="interfaces/SignoutRequestArgs.html" class="tsd-kind-icon">Signout<wbr/>Request<wbr/>Args</a></li><li class="tsd-kind-interface"><a href="interfaces/StateStore.html" class="tsd-kind-icon">State<wbr/>Store</a></li><li class="tsd-kind-interface"><a href="interfaces/UseRefreshTokenArgs.html" class="tsd-kind-icon">Use<wbr/>Refresh<wbr/>Token<wbr/>Args</a></li><li class="tsd-kind-interface"><a href="interfaces/UserManagerSettings.html" class="tsd-kind-icon">User<wbr/>Manager<wbr/>Settings</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AccessTokenCallback" class="tsd-kind-icon">Access<wbr/>Token<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#CreateSignoutRequestArgs" class="tsd-kind-icon">Create<wbr/>Signout<wbr/>Request<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ExtraSigninRequestArgs" class="tsd-kind-icon">Extra<wbr/>Signin<wbr/>Request<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ExtraSignoutRequestArgs" class="tsd-kind-icon">Extra<wbr/>Signout<wbr/>Request<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#QuerySessionStatusArgs" class="tsd-kind-icon">Query<wbr/>Session<wbr/>Status<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#RevokeTokensTypes" class="tsd-kind-icon">Revoke<wbr/>Tokens<wbr/>Types</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SigninPopupArgs" class="tsd-kind-icon">Signin<wbr/>Popup<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SigninRedirectArgs" class="tsd-kind-icon">Signin<wbr/>Redirect<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SigninSilentArgs" class="tsd-kind-icon">Signin<wbr/>Silent<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SigningKey" class="tsd-kind-icon">Signing<wbr/>Key</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SignoutPopupArgs" class="tsd-kind-icon">Signout<wbr/>Popup<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SignoutRedirectArgs" class="tsd-kind-icon">Signout<wbr/>Redirect<wbr/>Args</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SilentRenewErrorCallback" class="tsd-kind-icon">Silent<wbr/>Renew<wbr/>Error<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#UserLoadedCallback" class="tsd-kind-icon">User<wbr/>Loaded<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#UserProfile" class="tsd-kind-icon">User<wbr/>Profile</a></li><li class="tsd-kind-type-alias"><a href="modules.html#UserSessionChangedCallback" class="tsd-kind-icon">User<wbr/>Session<wbr/>Changed<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#UserSignedInCallback" class="tsd-kind-icon">User<wbr/>Signed<wbr/>In<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#UserSignedOutCallback" class="tsd-kind-icon">User<wbr/>Signed<wbr/>Out<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#UserUnloadedCallback" class="tsd-kind-icon">User<wbr/>Unloaded<wbr/>Callback</a></li><li class="tsd-kind-variable"><a href="modules.html#Version" class="tsd-kind-icon">Version</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li><li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>